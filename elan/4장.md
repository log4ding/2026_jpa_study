# 4장. 엔티티 매핑

## 4.1 @Entity

- 기본 생성자 필수 (public 혹은 protected 생성자)
- final 클래스 및 enum, interface, inner 클래스에 사용불가
- 저장할 필드에 final 불가

## 4.2 @Table

## 4.3 다양한 매핑사용

- enum 사용가능
- 자바의 날짜 타입은 @Temporal 로 매핑
- CLOB/BLOB 같은 데이터는 @Lob 사용

## 4.4 데이터베이스 스키마 자동 생성

- 개발환경에서는 좋지만 운영환경에서는 사용하면 안됨.

## 4.5 DDL 생성기능

- 나쁘진 않아보이는데 관리적인 측면에서 DBA 와 겹친다면 곤란할듯.

## 4.6 기본키 매핑

### 4.6.1 직접 할당 전략

### 4.6.2 IDENTITY 전략

- @GeneratedValue 에서 strategy 를 GenerationType.IDENTITY 로 구성.
- db에서 키를 생성하므로 em.persist() 호출시 바로 DB 에 저장됨.

### 4.6.3 SEQUENCE 전략

- IDENTITY 와는 다르게 em.persist() 시 시퀀스의 값만 확인하여 부여.

### 4.6.4 TABLE 전략

- 테이블로 시퀀스를 흉내낸 전략

### 4.6.5 AUTO 전략

- DB 방언에 따라 자동으로 선택됨
- 스키마 자동 생성을 하는 경우 개발에선 편의성이 높아짐.

### 4.6.6 기본키 매핑 정리

- 자연키보다 대리키를 권장
- 샤딩을 고려하는 경우도 키전략을 잘 수립해야함.

## 4.7 필드와 컬럼 매핑: 래퍼런스

- @Transient 매핑하지 않음.
- @Access 엔티티 데이터에 접근하는 방식을 지정, 또한 ID 의 위치에 따라서도 결정됨.
